{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "api": "cd api && npm install",
    "frontend": "echo 'Static site, no build needed'"
  },
  "deploy": {
    "api": {
      "start": "npm start",
      "prestart": "npm run migrate",
      "healthcheckPath": "/health"
    },
    "frontend": {
      "static": {
        "directory": "frontend"
      }
    }
  },
  "variables": {
    "api": {
      "PORT": "3000",
      "DATABASE_URL": {
        "fromService": "postgres",
        "property": "connectionString"
      }
    }
  },
  "services": {
    "postgres": {
      "name": "PostgreSQL",
      "type": "postgres"
    }
  }
}